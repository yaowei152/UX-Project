<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CCA Sign Up - NYP Athletics</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="css/updatedmain.css">
    <link rel="stylesheet" href="css/signup.css">
</head>
<body>
    <div class="background-logo">
        <img src="images/Athletics logo.png" alt="Athletics Logo" style="width:100%;height:auto;display:block;">
    </div>
    
    <header>
        <div class="sticky-header">
            <div class="top-bar">
                NANYANG | THE INNOVATIVE POLYTECHNIC
            </div>
            <nav class="navbar" id="mainNavbar">
                <div class="navdiv">
                    <div class="brand">
                        <a href="Main.html">
                            <img class="logo" src="images/NYP_Logo-removebg-preview.png" alt="NYP Logo">
                        </a>
                    </div>
                    <ul class="nav_links">
                        <li><a href="Main.html">Home</a></li>
                        <li><a href="CCA.html">CCAs</a></li>
                        <li><a href="about.html">About</a></li>
                        <li><a href="contactus.html">Contact Us</a></li>
                    </ul>
                    <div class="nav-right">
                        <div class="search">
                            <i class="fas fa-search search-icon"></i>
                            <input type="text" placeholder="Search for information..." />
                        </div>
                        <div class="profile">
                            <a href="Signin.html">
                                <i class="fa-solid fa-user"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <div class="main-content">
        <div class="signup-container">
            <h2 class="signup-title">CCA Application Form</h2>
            <form class="signup-form" id="signupForm">
                <div class="form-group">
                    <label for="fullName">Full Name (as per NRIC)</label>
                    <input type="text" id="fullName" name="fullName" required>
                </div>
                
                <div class="form-group">
                    <label for="adminNumber">School Admin Number</label>
                    <input type="text" id="adminNumber" name="adminNumber" required
                           pattern="[0-9]{6}[a-zA-Z]"
                           title="Admin number must be 6 digits followed by a letter (e.g., 123456A).">
                </div>
                
                <div class="form-group">
                    <label for="email">School Email</label>
                    <input type="email" id="email" name="email" required 
                           pattern="[0-9]{6}[a-zA-Z]@mymail\.nyp\.edu\.sg" 
                           title="Please use your school email, which should match your admin number (e.g., 123456A@mymail.nyp.edu.sg).">
                </div>

                <div class="form-group">
                    <label for="interest">Why are you interested in joining this CCA?</label>
                    <textarea id="interest" name="interest" required placeholder="Share your passion, experience, and what you hope to achieve..."></textarea>
                </div>

                <div class="form-group">
                    <label>Upload Achievements (Optional)</label>
                    
                    <input type="file" id="achievements" name="achievements" multiple 
                           accept="image/*, .pdf, .doc, .docx" style="display: none;">
                    
                    <small style="display: block; margin-bottom: 10px; color: #666;">You can add multiple files using the button below.</small>

                    <div id="file-list-container">
                        <div class="file-upload-header">
                            <label for="achievements" class="file-upload-btn">
                                <i class="fas fa-paperclip"></i> Add File
                            </label>
                            <p id="file-list-header"></p>
                        </div>
                        <ul id="file-list"></ul>
                    </div>
                </div>
                
                <button type="submit" class="signup-button">Submit Application</button>
            </form>
        </div>
    </div>
            <div id="successModal" class="modal-overlay">
            <div class="modal-content">
                <button class="close-modal-btn">&times;</button>
                <div class="modal-icon">
                    <i class="fas fa-check"></i>
                </div>
                <h2>Application Submitted!</h2>
                <p id="modalMessage1">Thank you! Your application has been received successfully.</p>
                <p>We will get back to you at your school email within 1-3 business days.</p>
            </div>
        </div

    

    <footer class="footer">
    </footer>
    
    <div class="back-to-top" id="backToTop">
        <i class="fas fa-arrow-up"></i>
    </div>

    <script>
        let stagedFiles = [];

        const signupForm = document.getElementById('signupForm');
        const fileInput = document.getElementById('achievements');
        const fileListDisplay = document.getElementById('file-list');
        const fileListHeader = document.getElementById('file-list-header');
        
        // --- START: Modal Elements and Functions ---
        const modalOverlay = document.getElementById('successModal');
        const closeModalBtn = document.querySelector('.close-modal-btn');
        const modalMessage1 = document.getElementById('modalMessage1');

        function showModal(fullName) {
            // Update the personalized message in the modal
            modalMessage1.textContent = `Thank you, ${fullName}! Your application has been received successfully.`;
            // Show the modal with a fade-in effect
            modalOverlay.classList.add('show');
        }

        function closeModal() {
            // Hide the modal with a fade-out effect
            modalOverlay.classList.remove('show');
        }

        // Add event listeners to close the modal
        closeModalBtn.addEventListener('click', closeModal);
        modalOverlay.addEventListener('click', function(event) {
            // Close only if the dark overlay area is clicked, not the content inside
            if (event.target === modalOverlay) {
                closeModal();
            }
        });
        // --- END: Modal Elements and Functions ---


        fileInput.addEventListener('change', (event) => {
            Array.from(event.target.files).forEach(file => stagedFiles.push(file));
            renderFileList();
            // Clear the file input to allow selecting the same file again
            event.target.value = '';
        });

        function renderFileList() {
            fileListDisplay.innerHTML = '';
            fileListHeader.textContent = `Selected files: ${stagedFiles.length}`;

            if (stagedFiles.length === 0) {
                const emptyItem = document.createElement('li');
                emptyItem.textContent = 'No files chosen.';
                emptyItem.style.color = '#888';
                emptyItem.style.justifyContent = 'center';
                fileListDisplay.appendChild(emptyItem);
                return;
            }

            stagedFiles.forEach((file, index) => {
                const listItem = document.createElement('li');
                let previewElement;

                if (file.type.startsWith('image/')) {
                    previewElement = document.createElement('img');
                    previewElement.src = URL.createObjectURL(file);
                    previewElement.classList.add('file-preview', 'image-thumbnail');
                    previewElement.alt = `Preview of ${file.name}`;
                } else {
                    previewElement = document.createElement('div');
                    const icon = document.createElement('i');
                    icon.className = 'fas fa-file-alt';
                    previewElement.appendChild(icon);
                    previewElement.classList.add('file-preview', 'file-icon');
                }
                listItem.appendChild(previewElement);

                const fileName = document.createElement('span');
                fileName.textContent = file.name;
                listItem.appendChild(fileName);

                const removeBtn = document.createElement('button');
                removeBtn.textContent = 'Remove';
                removeBtn.type = 'button';
                removeBtn.className = 'remove-file-btn';
                removeBtn.onclick = () => {
                    stagedFiles.splice(index, 1);
                    renderFileList();
                };
                listItem.appendChild(removeBtn);

                fileListDisplay.appendChild(listItem);
            });
        }

        signupForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const fullNameInput = document.getElementById('fullName');
            const adminNumberInput = document.getElementById('adminNumber');
            const emailInput = document.getElementById('email');
            
            const fullName = fullNameInput.value.trim();
            const adminNumber = adminNumberInput.value.trim().toUpperCase();
            const email = emailInput.value.trim();
            
            const adminRegex = /^[0-9]{6}[A-Z]$/;

            if (!fullName) {
                alert('Please enter your full name.');
                return;
            }

            if (!adminRegex.test(adminNumber)) {
                alert('Invalid Admin Number.\nPlease enter 6 digits followed by one letter (e.g., 123456A).');
                return;
            }

            const expectedEmail = adminNumber + '@mymail.nyp.edu.sg';
            if (email.toLowerCase() !== expectedEmail.toLowerCase()) {
                alert(`Invalid School Email.\nYour email must match your admin number. It should be: ${expectedEmail}.`);
                return;
            }
            
            // --- Show the new modal instead of the old alert ---
            showModal(fullName);
            
            // Reset form and file list
            this.reset();
            stagedFiles = [];
            renderFileList();
        });

        // Initial render for the file list
        renderFileList();
        
        // --- Scroll related functions (unchanged) ---
        document.getElementById('backToTop').addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
        
        window.addEventListener('scroll', function() {
            const navbar = document.getElementById('mainNavbar');
            const backToTop = document.getElementById('backToTop');
            if (window.scrollY > 10) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
            if (window.scrollY > 500) {
                backToTop.classList.add('show');
            } else {
                backToTop.classList.remove('show');
            }
        });
    </script>
</body>
</html>